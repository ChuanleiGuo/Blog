<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chuanleiguo.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="最近阅读「深入理解计算机系统」，并在读书的过程中完成练习题和章节附带实验。实验一是「信息的表示和处理」章节的实验，主要考察对有&#x2F;无符号整数、浮点数在 bite 级别存储和操作的理解。 总体要求实验对可使用的操作、数字有严格的要求：  使用的整数必须在 0~255(0xFF)之间，而不允许使用大的常量，如：0xFFFFFFFF 不可以使用全局变量 在整数上可以使用的一元运算符只有：! 和 ~ 在整数">
<meta property="og:type" content="article">
<meta property="og:title" content="【深入理解计算机系统实验笔记】| Data Lab">
<meta property="og:url" content="http://chuanleiguo.com/2017/03/12/csapp-datalab/index.html">
<meta property="og:site_name" content="Chuan&#39;s Cabin">
<meta property="og:description" content="最近阅读「深入理解计算机系统」，并在读书的过程中完成练习题和章节附带实验。实验一是「信息的表示和处理」章节的实验，主要考察对有&#x2F;无符号整数、浮点数在 bite 级别存储和操作的理解。 总体要求实验对可使用的操作、数字有严格的要求：  使用的整数必须在 0~255(0xFF)之间，而不允许使用大的常量，如：0xFFFFFFFF 不可以使用全局变量 在整数上可以使用的一元运算符只有：! 和 ~ 在整数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://chuanleiguo.com/images/2017-3-12/14893087870697.png">
<meta property="og:image" content="http://chuanleiguo.com/images/2017-3-12/dlc.png">
<meta property="og:image" content="http://chuanleiguo.com/images/2017-3-12/btest.png">
<meta property="article:published_time" content="2017-03-12T09:31:23.000Z">
<meta property="article:modified_time" content="2020-08-09T09:04:49.269Z">
<meta property="article:author" content="Chuanlei Guo">
<meta property="article:tag" content="计算机科学">
<meta property="article:tag" content="深入理解计算机系统">
<meta property="article:tag" content="计算机系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://chuanleiguo.com/images/2017-3-12/14893087870697.png">

<link rel="canonical" href="http://chuanleiguo.com/2017/03/12/csapp-datalab/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>【深入理解计算机系统实验笔记】| Data Lab | Chuan's Cabin</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container {
  overflow: auto hidden;
}

mjx-container + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Chuan's Cabin</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Code & Live with Love</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-programming-language">

    <a href="/categories/programming-language" rel="section"><i class="fa fa-rocket fa-fw"></i>编程语言</a>

  </li>
        <li class="menu-item menu-item-sourcecode">

    <a href="/categories/sourcecode" rel="section"><i class="fa fa-code fa-fw"></i>源码分析</a>

  </li>
        <li class="menu-item menu-item-computer-science">

    <a href="/categories/computer-science" rel="section"><i class="fa fa-cogs fa-fw"></i>计算机科学</a>

  </li>
        <li class="menu-item menu-item-mooc">

    <a href="/categories/mooc" rel="section"><i class="fa fa-graduation-cap fa-fw"></i>MOOC</a>

  </li>
        <li class="menu-item menu-item-booknotes">

    <a href="/categories/booknotes" rel="section"><i class="fa fa-book fa-fw"></i>读书笔记</a>

  </li>
        <li class="menu-item menu-item-diary">

    <a href="/categories/diary" rel="section"><i class="fa fa-keyboard fa-fw"></i>日志</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chuanleiguo.com/2017/03/12/csapp-datalab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chuanlei Guo">
      <meta itemprop="description" content="正因为未知，人与人之间的羁绊才愈发迷人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chuan's Cabin">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【深入理解计算机系统实验笔记】| Data Lab
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-03-12 17:31:23" itemprop="dateCreated datePublished" datetime="2017-03-12T17:31:23+08:00">2017-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-09 17:04:49" itemprop="dateModified" datetime="2020-08-09T17:04:49+08:00">2020-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">计算机科学</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/03/12/csapp-datalab/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/12/csapp-datalab/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>最近阅读「深入理解计算机系统」，并在读书的过程中完成练习题和章节附带实验。<a href="http://csapp.cs.cmu.edu/3e/labs.html" target="_blank" rel="noopener">实验一</a>是「信息的表示和处理」章节的实验，主要考察对有/无符号整数、浮点数在 bite 级别存储和操作的理解。</p>
<h2 id="总体要求"><a href="#总体要求" class="headerlink" title="总体要求"></a>总体要求</h2><p>实验对可使用的操作、数字有严格的要求：</p>
<ol>
<li>使用的整数必须在 0~255(0xFF)之间，而不允许使用大的常量，如：0xFFFFFFFF</li>
<li>不可以使用全局变量</li>
<li>在整数上可以使用的一元运算符只有：! 和 ~</li>
<li>在整数上可以使用的二元运算符只有：&amp; ^ | + &lt;&lt; &gt;&gt;</li>
<li>对个别题目的限制可能会略微放宽，如允许使用循环</li>
<li>每个答案会限制允许的最大操作数</li>
<li>在完成实验后，可以使用 dlc 工具检查代码的格式和操作数是否符合要求，使用 btest 检查结果是否通过测试。</li>
</ol>
<h2 id="题目及思路"><a href="#题目及思路" class="headerlink" title="题目及思路"></a>题目及思路</h2><h3 id="bitAnd"><a href="#bitAnd" class="headerlink" title="bitAnd"></a>bitAnd</h3><ul>
<li>要求：计算 <code>x &amp; y</code> 的值</li>
<li>允许操作：<code>~ |</code></li>
<li>操作数限制：8次</li>
</ul>
<p>使用了简单的逻辑推导</p>
<p>$$ <del>(x &amp; y) = (</del>x) | (<del>y) ==&gt; (x &amp; y) = ~((</del>x) | (~y)) $$</p>
<p>可以得到答案：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitAnd</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * ~(x &amp; y) = (~x) | (~y)</span></span><br><span class="line"><span class="comment">   * ==&gt; (x &amp; y) = ~((~x) | (~y))</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">return</span> ~((~x) | (~y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="getByte"><a href="#getByte" class="headerlink" title="getByte"></a>getByte</h3><ul>
<li>要求：得到 <code>x</code> 中第 n 个字节</li>
<li>n 的范围：[0, 3]</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：6</li>
</ul>
<p>以 x=0x12345678 为例，<code>getByte(x, 0)=0x78</code>, <code>getByte(x, 1)=0x56</code>。我使用了 0xff 作为 mask，将 x 的指定字节移动到低位后与 mask 做 <code>&amp;</code> 运算得到结果。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getByte</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x &gt;&gt; (n &lt;&lt; <span class="number">3</span>)) &amp; <span class="number">0xff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>做完成这个题目的时候，我犯了一个错误。我认为整数在以 Intel 作为芯片的计算机使用小端存储，所以<code>0x12345678</code>在内存中的布局应该是<code>0x78 0x56 0x34 0x12</code>，那么如果要取得第 n 个字节的话，首先应该将<code>x</code>右移<code>(3 - n) * 8</code>位。按照我的错误理解，自然也得到了错误地结果。后来我在认识到：<strong>大/小端存储仅仅关系到整数的字节在内存的布局方式，当整数被加载在 CPU 中之后，字节的布局方式就不再存在大/小端的问题了</strong></p>
<blockquote>
<p>Endianness only matters for layout of data in memory. As soon as data is loaded by the processor to be operated on, endianness is completely irrelevent. Shifts, bitwise operations, and so on perform as you would expect (data logically laid out as low-order bit to high) regardless of endianness</p>
</blockquote>
<h3 id="logicalShift"><a href="#logicalShift" class="headerlink" title="logicalShift"></a>logicalShift</h3><ul>
<li>要求：将 <code>x</code> 逻辑右移 n 位</li>
<li>假定 <code>0 &lt;= n &lt;= 31</code></li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：20</li>
</ul>
<p>这个问题主要是要解决负数右移后会在高位进行<a href="https://en.wikipedia.org/wiki/Sign_extension" target="_blank" rel="noopener">符号扩展</a>的问题，需要在将 x 右移后将高位拓展后的位清零。所以我使用<code>~(((0x1 &lt;&lt; 31) &gt;&gt; n) &lt;&lt; 1)</code>作为 mask 将「扩展位」清零。这里用到的小技巧就是将<code>(0x01 &lt;&lt; 31)</code>右移可以得到在高位做符号扩展从而得到模板，如<code>((0x1 &lt;&lt; 31) &gt;&gt; 8)</code>可以得到<code>0xff000000</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">logicalShift</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x &gt;&gt; n) &amp; ~(((<span class="number">0x1</span> &lt;&lt; <span class="number">31</span>) &gt;&gt; n) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="bitCount"><a href="#bitCount" class="headerlink" title="bitCount"></a>bitCount</h3><ul>
<li>要求：得到在某个字中为 1 的 bit 个数</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：40</li>
</ul>
<p>这个题目我不会做，在网上找到了<a href="https://en.wikipedia.org/wiki/Hamming_weight" target="_blank" rel="noopener">Hamming weight</a>算法。这个算法的思想使用分治策略，先计算每两个相邻的 bit 中有多少个 1，之后再依次求解在4、8、16、32个 bit 中共有多少个 1。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitCount</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  x = (x &amp; <span class="number">0x55555555</span>) + ((x &gt;&gt; <span class="number">1</span>) &amp; <span class="number">0x55555555</span>);</span><br><span class="line">  x = (x &amp; <span class="number">0x33333333</span>) + ((x &gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x33333333</span>);</span><br><span class="line">  x = (x &amp; <span class="number">0x0F0F0F0F</span>) + ((x &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0F0F0F0F</span>);</span><br><span class="line">  x = (x &amp; <span class="number">0x00FF00FF</span>) + ((x &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0x00FF00FF</span>);</span><br><span class="line">  x = (x &amp; <span class="number">0x0000FFFF</span>) + ((x &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>);</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个算法还有优化空间，所以也有使用更少操作的实现方法，但是我认为这个基础版本是最容易读的，用户体验更好。该问题及其他高效实现在<a href="http://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer" target="_blank" rel="noopener">StackOverflow</a></p>
<h3 id="bang"><a href="#bang" class="headerlink" title="bang"></a>bang</h3><ul>
<li>要求：计算 <code>!x</code></li>
<li>允许操作：<code>~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：12</li>
</ul>
<p>这个题目要注意的一点就是在 C 语言中<code>||</code>、<code>&amp;&amp;</code>和<code>!</code>是<strong>逻辑运算</strong>，而<code>~</code>、<code>&amp;</code>、<code>|</code>和<code>^</code>是<strong>位级运算</strong>。在逻辑运算中，任何<strong>非零</strong>参数都是表示 True，0 表示 False。所以<code>bang(3)=bang(-3)=0</code>，而<code>bang(0)=1</code>。我们知道在整数的补码表示中<code>+0</code>和<code>-0</code>的符号为都为 0。根据这个特点，可以得到解法：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bang</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> negx = ~x + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> x_sign = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> negx_sign = (negx &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (x_sign | negx_sign) ^ <span class="number">0x1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="tmin"><a href="#tmin" class="headerlink" title="tmin"></a>tmin</h3><ul>
<li>要求：返回使用2进制补码表示的最小的整数</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：4</li>
</ul>
<p>了解补码的表示方式后，直接返回<code>0x80000000</code>即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">tmin</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0x1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="fitsBits"><a href="#fitsBits" class="headerlink" title="fitsBits"></a>fitsBits</h3><ul>
<li>要求：如果<code>x</code>可以被 n 位的2进制补码表示则返回1，否则返回0</li>
<li>假定<code>1 &lt;= n &lt;= 32</code></li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：15</li>
</ul>
<p>n 位补码能够表示的数的范围是$[-2^{n-1}, 2^{n-1}-1]$，所以如果在这个范围内则返回1，否则返回0。如果<code>x</code>大于$2^{n-1}-1$，则会发生正溢出，得到负数；如果<code>x</code>小于$-2^{n-1}$则会发生负溢出。所以题目的求解方法就是将<code>x</code>的符号位从第 n 位拓展到第32位得到<code>extened_x</code>，之后通过判断<code>x == exntened_x</code>来判断是否发生了溢出。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fitsBits</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> shiftNum = <span class="number">32</span> + (~n + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> !(((x &lt;&lt; shiftNum) &gt;&gt; shiftNum) ^ x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="divpwr2"><a href="#divpwr2" class="headerlink" title="divpwr2"></a>divpwr2</h3><ul>
<li>要求：计算$x/2^{n}$，并向零舍入</li>
<li>假定<code>0 &lt;= n &lt;= 30</code></li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：15</li>
</ul>
<p>因为当<code>x &gt; 0</code>时，<code>x &gt;&gt; n</code>会自动向下(向零)舍入，我们不需要做特殊操作。所以在整数<code>x</code>除以$2^{n}$时主要是要实现当<code>x &lt; 0</code>时的向零(向上)舍入，实现方法就是为<code>x</code>添加一个偏移值<code>bias = (1 &lt;&lt; n) - 1</code>，计算<code>(x + bias) &gt;&gt; k</code>。</p>
<blockquote>
<p>在为 <code>x</code> 添加偏移量后，低 k 位左边的位可能会加 1，也可能不会加 1。对于不需要舍入的情况，加上偏移量只影响那些被移除的位；对于需要舍入的情况，加上偏移量导致较高的位加 1，所以结果会向零舍入。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">divpwr2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">  <span class="keyword">int</span> bias = sign &amp; ((<span class="number">1</span> &lt;&lt; n) + (~<span class="number">0</span>));</span><br><span class="line">  <span class="keyword">return</span> (x + bias) &gt;&gt; n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="negate"><a href="#negate" class="headerlink" title="negate"></a>negate</h3><ul>
<li>要求：计算 -x</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：5</li>
</ul>
<p>在整数的补码表示中 <code>-x = (~x) + 1</code>，所以程序很简单：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">negate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ~x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="isPositive"><a href="#isPositive" class="headerlink" title="isPositive"></a>isPositive</h3><ul>
<li>要求：如果<code>x &gt; 0</code>返回1，否则返回 0</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：8</li>
</ul>
<p>利用向右算术移位运算中的符号拓展原则，如果<code>x &lt; 0</code>那么<code>x &gt;&gt; 31</code>会得到 0xFFFFFFFF。注意还要处理<code>x = 0</code>的情况。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isPositive</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !((x &gt;&gt; <span class="number">31</span>) | (!x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="isLessOrEqual"><a href="#isLessOrEqual" class="headerlink" title="isLessOrEqual"></a>isLessOrEqual</h3><ul>
<li>要求：如果<code>x &lt;= y</code>返回 1，否则返回 0</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：24</li>
</ul>
<p>只判断三种情况：</p>
<ol>
<li>x &lt; 0 并且 y &gt; 0</li>
<li>x 和 y 的符号位相同，并且 x - y &lt; 0</li>
<li>x = y</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLessOrEqual</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> signx = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> signy = (y &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> differ = x + (~y + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">int</span> sign_d = (differ &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">return</span> (signx &amp; (!signy)) | ((!(signx ^ signy)) &amp; sign_d) | (!(x ^ y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ilog2"><a href="#ilog2" class="headerlink" title="ilog2"></a>ilog2</h3><ul>
<li>要求：计算$log_2^{x}$，向下舍入</li>
<li>允许操作：<code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code></li>
<li>操作数限制：90</li>
</ul>
<p>看这道题目的操作数的限制，就知道很有难度。因为在得到结果后需要向下舍入，所以我们只需要判断<code>x</code>的补码表示中最高位<code>1</code>的位置，或者说要得到最高位<code>1</code>后面的位数。这里主要是使用了类似分治的策略：考虑字的左边 16 位是否为全 0，如果是的话，不做任何操作，如果不为全零的话，说明最高位的<code>1</code>在<code>x</code>补码表示的左半边，那么可以通过右移“砍掉”右半边的数字，并记录被“砍掉”的位数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ilog2</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> shift1, shift2, shift3, shift4, shift5;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> sign = !!(x &gt;&gt; <span class="number">16</span>);</span><br><span class="line">  shift1 = sign &lt;&lt; <span class="number">4</span>;</span><br><span class="line">  x = x &gt;&gt; shift1;</span><br><span class="line"></span><br><span class="line">  sign = !!(x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">  shift2 = sign &lt;&lt; <span class="number">3</span>;</span><br><span class="line">  x = x &gt;&gt; shift2;</span><br><span class="line"></span><br><span class="line">  sign = !!(x &gt;&gt; <span class="number">4</span>);</span><br><span class="line">  shift3 = sign &lt;&lt; <span class="number">2</span>;</span><br><span class="line">  x = x &gt;&gt; shift3;</span><br><span class="line"></span><br><span class="line">  sign = !!(x &gt;&gt; <span class="number">2</span>);</span><br><span class="line">  shift4 = sign &lt;&lt; <span class="number">1</span>;</span><br><span class="line">  x = x &gt;&gt; shift4;</span><br><span class="line"></span><br><span class="line">  sign = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">  shift5 = sign;</span><br><span class="line">  x = x &gt;&gt; shift5;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> shift1 + shift2 + shift3 + shift4 + shift5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>感觉代码要比我的文字清晰易读多了。</p>
<h3 id="float-neg"><a href="#float-neg" class="headerlink" title="float_neg"></a>float_neg</h3><ul>
<li>要求：f 为浮点数的位级表示，返回<code>-f</code>的位级表示，如果 f 为 NaN，返回 f</li>
<li>允许操作：允许所有有/无符号数的操作，并允许使用 if 和 while</li>
<li>操作数限制：10</li>
</ul>
<p>浮点数使用 <a href="https://en.wikipedia.org/wiki/IEEE_floating_point" target="_blank" rel="noopener">IEEE754</a>标准，单精度的浮点数中有 1 位符号位，8 为指数位和 23 位小数位。</p>
<p><img src="/images/2017-3-12/14893087870697.png" alt=""></p>
<p>所以当 <code>f</code> 不为 NaN 时，要返回<code>-f</code>，只需要将符号位取反即可；判断 f 是否为 NaN 则要判断指数位是否为全 1，并且小数为不为全 0。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">float_neg</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> exp_mask = <span class="number">0xff</span> &lt;&lt; <span class="number">23</span>;</span><br><span class="line">  <span class="keyword">if</span> ((!((uf &amp; exp_mask) ^ exp_mask)) &amp;&amp; (uf &amp; ((<span class="number">1</span> &lt;&lt; <span class="number">23</span>) + (~<span class="number">0</span>)))) &#123;</span><br><span class="line">    <span class="keyword">return</span> uf;</span><br><span class="line">  &#125;  <span class="keyword">return</span> (uf ^ (<span class="number">0x1</span> &lt;&lt; <span class="number">31</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="float-i2f"><a href="#float-i2f" class="headerlink" title="float_i2f"></a>float_i2f</h3><ul>
<li>要求：返回整数 x 的浮点数的位级表示</li>
<li>允许操作：允许所有有/无符号数的操作，并允许使用 if 和 while</li>
<li>操作数限制：30</li>
</ul>
<p>讲真，最开始做这个题目的时候我的大脑是一片混乱的，因为要处理的细节很多：舍入、指数位增加偏移量等。最终我参考了<a href="http://wdxtub.com/2016/04/16/thick-csapp-lab-1/" target="_blank" rel="noopener">小土刀</a>的答案，才基本理清了思路。</p>
<p>要返回的答案，需要组合浮点数三部分(符号位、指数位和小数位)，即<br><code>(sign &lt;&lt; 31) | (exponent) &lt;&lt; 23 | fraction</code>。</p>
<ol>
<li>当 x = 0 时，返回 0</li>
<li>当 x = 0x80000000 时，令 exponent = 158，因为 158 - 127 = 31，其中 Bias = $2^{n-1} - 1$</li>
<li>如果 x &lt; 0, 则 sign = 1；并令 x = -x，这样之后在做移位等操作就不用担心符号位了</li>
<li>计算整数 x 的位数，作为计算 exponent 的依据</li>
<li>得到 exponent 后，将 x 右移计算小数值 fraction，并且根据移除的值是否大于等于1.5来判断是否要进位，从而实现向零舍入</li>
<li>如果小数位过多，则丢弃最高位并增加 exponent</li>
<li>组合符号位、指数位和小数位</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">float_i2f</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sign = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">int</span> exponent = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> fraction = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> delta = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> fraction_mask;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x == <span class="number">0x80000000</span>) &#123;</span><br><span class="line">    exponent = <span class="number">158</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (sign) &#123;</span><br><span class="line">      x = -x;</span><br><span class="line">    &#125;</span><br><span class="line">    i = <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">while</span> ( !(x &gt;&gt; i) ) &#123;</span><br><span class="line">      i --;</span><br><span class="line">    &#125;</span><br><span class="line">    exponent = i + <span class="number">127</span>;</span><br><span class="line"></span><br><span class="line">    x = x &lt;&lt; (<span class="number">31</span> - i);</span><br><span class="line">    fraction_mask = <span class="number">0x7fffff</span>;</span><br><span class="line">    fraction = fraction_mask &amp; (x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">    x = x &amp; <span class="number">0xff</span>;</span><br><span class="line">    delta = x &gt; <span class="number">128</span> || ((x == <span class="number">128</span>) &amp;&amp; (fraction &amp; <span class="number">0x1</span>));</span><br><span class="line">    fraction += delta;</span><br><span class="line">    <span class="keyword">if</span> (fraction &gt;&gt; <span class="number">23</span>) &#123;</span><br><span class="line">      fraction &amp;= fraction_mask;</span><br><span class="line">      exponent += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (sign &lt;&lt; <span class="number">31</span>) | (exponent &lt;&lt; <span class="number">23</span>) | fraction;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="float-twice"><a href="#float-twice" class="headerlink" title="float_twice"></a>float_twice</h3><ul>
<li>要求：返回 2 * f 的位级表示，f 为浮点数 f 的位级表示</li>
<li>如果 f 为 NaN 则返回 f</li>
<li>允许操作：允许所有有/无符号数的操作，并允许使用 if 和 while</li>
<li>操作数限制：30</li>
</ul>
<p>我们可以针对不同的情况来操作：</p>
<ol>
<li>若 f 为<code>+0</code>或<code>-0</code>，返回 f</li>
<li>若 f 为无穷大或 NaN，返回 f</li>
<li>若 f 为非规格化浮点数，则保留符号位，并将 f 左移1位</li>
<li>若 f 为规格化浮点数，则将 f 的指数位增加1</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">float_twice</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (uf == <span class="number">0</span> || uf == <span class="number">0x80000000</span>) &#123; <span class="keyword">return</span> uf; &#125;</span><br><span class="line">  <span class="keyword">if</span> (((uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xff</span>) == <span class="number">0xff</span>) &#123; <span class="keyword">return</span> uf; &#125;</span><br><span class="line">  <span class="keyword">if</span> (((uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xff</span>) == <span class="number">0x00</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (uf &amp; (<span class="number">0x1</span> &lt;&lt; <span class="number">31</span>)) | (uf &lt;&lt; <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> uf + (<span class="number">1</span> &lt;&lt; <span class="number">23</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最终结果"><a href="#最终结果" class="headerlink" title="最终结果"></a>最终结果</h2><p>代码规范检查：<br><img src="/images/2017-3-12/dlc.png" alt="dl"></p>
<p>代码结果检查：</p>
<p><img src="/images/2017-3-12/btest.png" alt="btest"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" rel="tag"># 计算机科学</a>
              <a href="/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" rel="tag"># 深入理解计算机系统</a>
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" rel="tag"># 计算机系统</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/03/02/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%B0%8F%E9%87%8C%E7%A8%8B%E7%A2%91/" rel="prev" title="英语学习的小里程碑">
      <i class="fa fa-chevron-left"></i> 英语学习的小里程碑
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/03/16/brief-history-of-humankind/" rel="next" title="【人类简史】读书笔记">
      【人类简史】读书笔记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#总体要求"><span class="nav-number">1.</span> <span class="nav-text">总体要求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题目及思路"><span class="nav-number">2.</span> <span class="nav-text">题目及思路</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#bitAnd"><span class="nav-number">2.1.</span> <span class="nav-text">bitAnd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getByte"><span class="nav-number">2.2.</span> <span class="nav-text">getByte</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#logicalShift"><span class="nav-number">2.3.</span> <span class="nav-text">logicalShift</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bitCount"><span class="nav-number">2.4.</span> <span class="nav-text">bitCount</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bang"><span class="nav-number">2.5.</span> <span class="nav-text">bang</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tmin"><span class="nav-number">2.6.</span> <span class="nav-text">tmin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fitsBits"><span class="nav-number">2.7.</span> <span class="nav-text">fitsBits</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#divpwr2"><span class="nav-number">2.8.</span> <span class="nav-text">divpwr2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#negate"><span class="nav-number">2.9.</span> <span class="nav-text">negate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#isPositive"><span class="nav-number">2.10.</span> <span class="nav-text">isPositive</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#isLessOrEqual"><span class="nav-number">2.11.</span> <span class="nav-text">isLessOrEqual</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ilog2"><span class="nav-number">2.12.</span> <span class="nav-text">ilog2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#float-neg"><span class="nav-number">2.13.</span> <span class="nav-text">float_neg</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#float-i2f"><span class="nav-number">2.14.</span> <span class="nav-text">float_i2f</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#float-twice"><span class="nav-number">2.15.</span> <span class="nav-text">float_twice</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#最终结果"><span class="nav-number">3.</span> <span class="nav-text">最终结果</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chuanlei Guo</p>
  <div class="site-description" itemprop="description">正因为未知，人与人之间的羁绊才愈发迷人</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ChuanleiGuo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ChuanleiGuo" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:chuanleiguo@gmail.com" title="E-Mail → mailto:chuanleiguo@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://weibo.com/bestchuan" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;bestchuan" rel="noopener" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chuanlei Guo</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://chuanleiguo-com.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://chuanleiguo.com/2017/03/12/csapp-datalab/";
    this.page.identifier = "2017/03/12/csapp-datalab/";
    this.page.title = "【深入理解计算机系统实验笔记】| Data Lab";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://chuanleiguo-com.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
